rampart.globalize(rampart.utils);

var cookie_expiration=86400;

//for testing from command line
if(!global.serverConf) serverConf={dataRoot:'/zfs/home/aaron/src/personal_search_extension/web_server/data'}

var Sql = use.sql;
var crypto = use.crypto;

var sql = new Sql.init(`${serverConf.dataRoot}/search/`, true);

var needpass=true;

while (needpass) {
    printf("Enter new password for admin: ");
    fflush(stdout);
    var data = fgets(stdin,256, {echo:false});
    printf("\n")
    var pass = trim(data);

    printf("Re-enter new password for admin: ");
    fflush(stdout);
    data = fgets(stdin,256,{echo:false});
    printf("\n")
    var pass2 = trim(data);

    if(pass!=pass2)
        printf("Passwords don't match\n");
    else
        needpass=false;
}



printf("pass is %s\n", data);


//sql.exec("select Hash, Url, Dom from aaron_pages", {maxRows:-1},
